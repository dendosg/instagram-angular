<nz-table #basicTable [nzData]="results" (nzPageIndexChange)="onPageIndexChange($event)">
  <thead>

    <tr *ngIf="type === 'GET_COMMENT_COMPONENT'">
      <th>Id</th>
      <th>Text</th>
      <th (click)="sort('created_at')">Created At</th>
      <th>Owner Id</th>
      <th>Owner Username</th>
    </tr>

    <tr *ngIf="type === 'GET_FOLLOWER_COMPONENT' || type === 'GET_FOLLOWING_COMPONENT' || type === 'GET_LIKE_COMPONENT' ">
      <th>Id</th>
      <th>Username</th>
      <th>Full Name</th>
      <th (click)="sort('is_verified')">Is Verified</th>
    </tr>

    <tr *ngIf="(type === 'GET_MEDIA_COMPONENT' || type === 'GET_MEDIA_INFO_COMPONENT') && optionValue.getMediaOf !== 'facebookPage'">
      <th>Id</th>
      <th>Owner Id</th>
      <th>Thumbnail</th>
      <th (click)="sort('is_video')">Is Video</th>
      <th (click)="sort('edge_media_to_caption.edges[0].node.text.length')">Caption</th>
      <th (click)="sort(null, 'hashtagInCaption')">Hashtag in Caption</th>
      <th (click)="sort(null, 'userInCaption')">User in Caption</th>
      <th>Shortcode</th>
      <th (click)="sort('edge_media_to_comment.count', '', 'edge_media_preview_comment.count')">Comment</th>
      <th (click)="sort('edge_liked_by.count', '', 'edge_media_preview_like.count')">Like</th>
      <th (click)="sort('taken_at_timestamp')">Taken at</th>
      <th *ngIf="type === 'GET_MEDIA_INFO_COMPONENT'">Location</th>
    </tr>
    <tr *ngIf="type === 'GET_MEDIA_COMPONENT' && optionValue.getMediaOf === 'facebookPage'">
        <th>Post Id</th>
        <th>Message</th>
        <th>Full Picture</th>
        <th (click)="sort('created_time')">Created Time</th>
        <th (click)="sort('likesCount')">Likes Count</th>
        <th (click)="sort('commentsCount')">Comments Count</th>
        <th (click)="sort('sharesCount')">Shares Count</th>
    </tr>
    <tr *ngIf="type === 'GET_USER_INFO_COMPONENT' ">
      <th>Id</th>
      <th>Bio</th>
      <th (click)="sort('external_url')">Website</th>
      <th (click)="sort('edge_followed_by.count')">Follower</th>
      <th (click)="sort('edge_follow.count')">Following</th>
      <th>Full Name</th>
      <th>Username</th>
      <th (click)="sort('is_verified')">Is Verified</th>
      <th (click)="sort('is_private')">Is Private</th>
    </tr>

    <tr *ngIf="type === 'GET_HASHTAG_INFO_COMPONENT'">
      <th>Id</th>
      <th>Name</th>
      <th (click)="sort('edge_hashtag_to_media.count')">Count</th>
      <th (click)="sort('allow_following')">Allow follow</th>
    </tr>

    <tr *ngIf="type === 'GET_MY_STORIES' ">
      <th>Id</th>
      <th>Thumbnail</th>
      <th>Video</th>
      <th>Taken At</th>
      <th>Expiring At</th>
      <th>Owner Id</th>
      <th>Owner Username</th>
    </tr>


    <tr *ngIf="type === 'SEARCH_COMPONENT' && optionValue.contextSearch === 'user' ">
      <th>Id</th>
      <th>Username</th>
      <th>Full Name</th>
      <th (click)="sort('follower_count')">Follower</th>
      <th (click)="sort('is_verified')">Is Verified</th>
    </tr>
    <tr *ngIf="type === 'SEARCH_COMPONENT' && optionValue.contextSearch === 'hashtag' ">
      <th>Id</th>
      <th>Name</th>
      <th (click)="sort('media_count')">Media Count</th>
    </tr>
    <tr *ngIf="type === 'SEARCH_COMPONENT' && optionValue.contextSearch === 'place' ">
      <th>Id</th>
      <th>Title</th>
      <th>external_source</th>
      <th>facebook_places_id</th>
      <th>address</th>
      <th>lng</th>
      <th>lat</th>
    </tr>
    <tr *ngIf="type === 'SEARCH_COMPONENT' && optionValue.contextSearch === 'placeFacebook'">
      <th>Id</th>
      <th>Name</th>
      <th>Description</th>
      <th (click)="sort('fan_count')">Fan Count</th>
      <th (click)="sort('talking_about_count')">Talk About</th>
      <th (click)="sort('checkins')">Checkins</th>
    </tr>
  </thead>

  <tbody *ngIf="type === 'GET_HASHTAG_INFO_COMPONENT'">
    <tr *ngFor="let data of basicTable.data">
      <td>{{data.id}}</td>
      <td>
        <nz-avatar nzIcon="user" [nzSrc]="data.profile_pic_url"></nz-avatar>
        <a href="https://www.instagram.com/explore/tags/{{data.name}}" target="_blank">#{{data.name}}</a>
      </td>
      <td>{{data.edge_hashtag_to_media.count}}</td>
      <td>{{data.allow_following}}</td>
    </tr>
  </tbody>

  <tbody *ngIf="type === 'SEARCH_COMPONENT' && optionValue.contextSearch === 'user' ">
    <tr *ngFor="let data of basicTable.data">
      <td>{{data.pk}}</td>
      <td>
        <nz-avatar nzIcon="user" [nzSrc]="data.profile_pic_url"></nz-avatar>
        <a href="https://www.instagram.com/{{data.username}}" target="_blank">{{data.username}}</a>
      </td>
      <td>{{data.full_name}}</td>
      <td>{{data.follower_count}}</td>
      <td>
        <nz-tag [nzColor]="data.is_verified ? 'blue' : 'grey'">{{data.is_verified ? 'Verified' : 'Not
          verified'}}</nz-tag>
      </td>
    </tr>
    <div [ngSwitch]="optionValue.contextSearch">
      <div *ngSwitchCase="'user'">
      </div>
      <div *ngSwitchCase="'hashtag'">

      </div>
      <div *ngSwitchDefault>output2</div>
    </div>

  </tbody>
  <tbody *ngIf="type === 'SEARCH_COMPONENT' && optionValue.contextSearch === 'hashtag' ">
    <tr *ngFor="let data of basicTable.data">
      <td>{{data.id}}</td>
      <td>
        <a href="https://www.instagram.com/explore/tags/{{data.name}}" target="_blank">
          <nz-tag [nzColor]="'blue'">#{{data.name}}</nz-tag>
        </a>
      </td>
      <td>{{data.media_count}}</td>
    </tr>
  </tbody>
  <tbody *ngIf="type === 'SEARCH_COMPONENT' && optionValue.contextSearch === 'place' ">
    <tr *ngFor="let data of basicTable.data">
      <td>{{data.location.pk}}</td>
      <td>
        <a href="https://www.instagram.com/explore/locations/{{data.location.pk}}/{{data.slug}}/" target="_blank">
          {{data.title}}
        </a>
      </td>
      <td>{{data.location.external_source}}</td>
      <td>{{data.location.facebook_places_id}}</td>
      <td>{{data.location.address}}</td>
      <td>{{data.location.lng}}</td>
      <td>{{data.location.lat}}</td>
    </tr>

  </tbody>
  <tbody *ngIf="type === 'SEARCH_COMPONENT' && optionValue.contextSearch === 'placeFacebook' ">
    <tr *ngFor="let data of basicTable.data">
      <td class="cursor teal" (click)="goToGetMedia(data.id)">
        {{data.id}}
      </td>
      <td>
        <a href="http://fb.com/{{data.id}}" target="_blank">{{data.name}}</a>
      </td>
      <td>
        <span nz-tooltip [nzTitle]="data.about || data.description">{{(data.about || data.description) | slice:0:20}}</span>
      </td>
      <td>{{data.fan_count}}</td>
      <td>{{data.talking_about_count}}</td>
      <td>{{data.checkins}}</td>
    </tr>

  </tbody>



  <tbody *ngIf="type === 'GET_MY_STORIES'">
    <tr *ngFor="let data of basicTable.data">
      <td>{{data.id}}</td>
      <td>
        <img (click)="openImageInNewTab(data.display_url)" [src]="data.display_url" height="150" />
      </td>
      <td>
        <a *ngIf="data.is_video" [href]="data.video_resources[data.video_resources.length-1].src" target="_blank">VIDEO</a>
      </td>
      <td>{{getFormatDate(data.taken_at_timestamp)}}</td>
      <td>{{getFormatDate(data.expiring_at_timestamp)}}</td>
      <td>{{data.owner.id}}</td>
      <td>
        <nz-avatar nzIcon="user" [nzSrc]="data.owner.profile_pic_url"></nz-avatar>
        <a href="https://www.instagram.com/{{data.owner.username}}" target="_blank">{{data.owner.username}}</a>
      </td>
    </tr>
  </tbody>



  <tbody *ngIf="type === 'GET_USER_INFO_COMPONENT'">
    <tr *ngFor="let data of basicTable.data">
      <td>{{data.id}}</td>
      <td>
        <span nz-tooltip [nzTitle]="data.biography">
          {{data.biography | slice:0:20}}
        </span>
      </td>
      <td>
        <a [href]="data.external_url" target="_blank">{{data.external_url}}</a>
      </td>
      <td>{{data.edge_followed_by.count}}</td>
      <td>{{data.edge_follow.count}}</td>
      <td>{{data.full_name}}</td>
      <td>
        <nz-avatar nzIcon="user" [nzSrc]="data.profile_pic_url"></nz-avatar>
        <a href="https://www.instagram.com/{{data.username}}" target="_blank">{{data.username}}</a>
      </td>
      <td>
        <nz-tag [nzColor]="data.is_verified ? 'blue' : 'grey'">{{data.is_verified ? 'Verified' : 'Not verified'}}</nz-tag>
      </td>
      <td>{{data.is_private}}</td>
    </tr>
  </tbody>

  <tbody *ngIf="(type === 'GET_MEDIA_COMPONENT' || type === 'GET_MEDIA_INFO_COMPONENT') && optionValue.getMediaOf !== 'facebookPage'">
    <tr *ngFor="let data of basicTable.data">
      <td>{{data.id}}</td>
      <td>{{data?.owner.id}}</td>
      <td>
        <img (click)="openImageInNewTab(data.display_url)" height="150" [src]="data.thumbnail_src || data.display_url" />
        <!-- <img (click)="openImageInNewTab(data.display_url)" [src]="data.display_url" height="150" /> -->
      </td>
      <td>
        <nz-tag [nzColor]="'cyan'">{{data?.is_video ? 'Video' : 'Photo' }}</nz-tag>
      </td>
      <td>
        <span nz-tooltip [nzTitle]="data.edge_media_to_caption.edges[0]?.node?.text">
          {{data.edge_media_to_caption?.edges[0]?.node?.text | slice:0:20}}
        </span>
      </td>
      <td>
        <a *ngFor="let hashtag of getHashtagFromMessage(data.edge_media_to_caption?.edges[0]?.node?.text)" href="https://www.instagram.com/explore/tags/{{hashtag}}"
          target="_blank">
          <nz-tag [nzColor]="'teal'">#{{hashtag}}</nz-tag>
        </a>
      </td>
      <td>
        <a href="https://instagram.com/{{user}}" target="_blank" *ngFor="let user of getUserFromMessage(data.edge_media_to_caption?.edges[0]?.node?.text)">
          <span nz-tooltip [nzTitle]="user">
            <nz-tag [nzColor]="'teal'">@{{user}}</nz-tag>
          </span>
        </a>
      </td>
      <td>
        <span nz-tooltip [nzTitle]="data.shortcode">
          <a href="https://www.instagram.com/p/{{data.shortcode}}" target="_blank">{{data.shortcode}}</a>
        </span>
      </td>
      <td>{{data?.edge_media_to_comment?.count || data?.edge_media_preview_comment?.count}}</td>
      <td>{{data?.edge_media_preview_like?.count}}</td>
      <td>{{getFormatDate(data.taken_at_timestamp)}}</td>
      <td *ngIf="data.location">
        <span nz-tooltip [nzTitle]="data.location.id">
          <a href="https://www.instagram.com/explore/locations/{{data.location.id}}/{{data.location.slug}}/" target="_blank">{{data.location.name}}</a>
        </span>
      </td>
    </tr>
  </tbody>

  <tbody *ngIf="type === 'GET_MEDIA_COMPONENT' && optionValue.getMediaOf === 'facebookPage'">
    <tr *ngFor="let data of basicTable.data">
        <td>
          <a href="http://fb.com/{{data.id}}" target="_blank">{{data.id}}</a>
        </td>
        <td> <span nz-tooltip [nzTitle]="data.message">{{data.message | slice:0:20}}</span></td>
        <td>
          <img *ngIf="data.full_picture" (click)="openImageInNewTab(data.full_picture)" [src]="data.full_picture" height="150" />
        </td>
        <td>{{getFormatDate(data.created_time)}}</td>
        <td>{{data.likesCount}}</td>
        <td>{{data.commentsCount}}</td>
        <td>{{data.sharesCount}}</td>
    </tr>
  </tbody>

  <tbody *ngIf="type === 'GET_FOLLOWER_COMPONENT' || type === 'GET_FOLLOWING_COMPONENT' || type === 'GET_LIKE_COMPONENT' ">
    <tr *ngFor="let data of basicTable.data">
      <td>{{data.id}}</td>
      <td>
        <nz-avatar nzIcon="user" [nzSrc]="data.profile_pic_url"></nz-avatar>
        <a href="https://www.instagram.com/{{data.username}}" target="_blank">{{data.username}}</a>
      </td>
      <td>{{data.full_name}}</td>
      <td>
        <nz-tag [nzColor]="data.is_verified ? 'blue' : 'grey'">{{data.is_verified ? 'Verified' : 'Not verified'}}</nz-tag>
      </td>
    </tr>
  </tbody>

  <tbody *ngIf="type === 'GET_COMMENT_COMPONENT'">
    <tr *ngFor="let data of basicTable.data">
      <td>{{data.id}}</td>
      <td> <span nz-tooltip [nzTitle]="data.text">{{data.text | slice:0:20}}</span></td>
      <td>{{getFormatDate(data.created_at)}}</td>
      <td>{{data.owner.id}}</td>
      <td>
        <nz-avatar nzIcon="user" [nzSrc]="data.owner.profile_pic_url"></nz-avatar>
        <a href="https://www.instagram.com/{{data.owner.username}}" target="_blank">{{data.owner.username}}</a>
      </td>
    </tr>
  </tbody>

</nz-table>


<span>From result:{{results[0] | json}}</span>